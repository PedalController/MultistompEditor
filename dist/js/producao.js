"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_get=function(e,t,n){for(var a=!0;a;){var s=e,r=t,i=n;u=l=o=void 0,a=!1,null===s&&(s=Function.prototype);var u=Object.getOwnPropertyDescriptor(s,r);if(void 0!==u){if("value"in u)return u.value;var o=u.get;return void 0===o?void 0:o.call(i)}var l=Object.getPrototypeOf(s);if(null===l)return void 0;e=l,t=r,n=i,a=!0}},ImplemetationError=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),t}(Error),BinarioUtil=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"byteArrayToHex",value:function(e){var t=" ",n=!0,a=!1,s=void 0;try{for(var r,i=e[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var u=r.value;t+=u.toString(16).toUpperCase()+" "}}catch(o){a=!0,s=o}finally{try{!n&&i["return"]&&i["return"]()}finally{if(a)throw s}}return"["+t+"]"}}]),e}(),Optional=function(){function e(t){_classCallCheck(this,e),this.content=t}return _createClass(e,[{key:"isPresent",value:function(){return null!==this.content}},{key:"get",value:function(){if(!this.isPresent())throw new Error("NullPointerException");return this.content}}],[{key:"of",value:function(t){return new e(t)}},{key:"empty",value:function(){return new e(null)}}]),e}(),PedalCompany=function(){function e(t){_classCallCheck(this,e),this.name=t}return _createClass(e,[{key:"getName",value:function(){return this.name}},{key:"toString",value:function(){return this.name}}]),e}();PedalCompany.NULL=new PedalCompany("Unknown Company"),PedalCompany.ZoomCorp=new PedalCompany("Zoom Corporation"),PedalCompany.Line6=new PedalCompany("Line 6"),PedalCompany.Roland=new PedalCompany("Roland Corporation");var PedalController=function(){function e(t){_classCallCheck(this,e),this.controllerListenners=new Array,this.realMultistompListenners=new Array,this.realChange=!1,this.started=!1,this.pedal=t,this.connection=new MidiConnection(t,t.getPedalType()),this.connection.setListenner(this),this.pedal.addListenner(this),this.controllerListenners.push(new Log("Controller")),this.realMultistompListenners.push(new Log("Real Multistomp"))}return _createClass(e,[{key:"on",value:function(){this.started||(this.started=!0,this.connection.start(),this.connection.send(this.pedal.start()),this.realChange=!1)}},{key:"off",value:function(){this.started&&(this.started=!1,this.connection.stop())}},{key:"hasStarted",value:function(){return this.started}},{key:"multistomp",value:function(){return this.pedal}},{key:"nextPatch",value:function(){this.pedal.nextPatch()}},{key:"beforePatch",value:function(){this.pedal.beforePatch()}},{key:"toPatch",value:function(e){this.pedal.toPatch(e)}},{key:"toogleEffect",value:function(e){this.pedal.currentPatch().effects[e].toggle()}},{key:"hasActived",value:function(e){return this.pedal.currentPatch().effects[e].hasActived()}},{key:"activeEffect",value:function(e){this.pedal.currentPatch().effects[e].active()}},{key:"disableEffect",value:function(e){this.pedal.currentPatch().effects[e].disable()}},{key:"setEffectParam",value:function(e,t,n){this.pedal.currentPatch().effects[e].params[t].setValue(n)}},{key:"getAmountEffects",value:function(){return this.pedal.currentPatch().effects.length}},{key:"addListenner",value:function(e){this.pedal.addListenner(e)}},{key:"toString",value:function(){var e="State: ";return e+=started?"On":"Off",e+="\n",e+this.pedal.toString()}},{key:"onChange",value:function(e){return this.realChange?void(this.realChange=!1):(this.connection.send(e),void this.notify(this.controllerListenners,e))}},{key:"update",value:function(e){this.realChange=!0;var t=new MultistompChanger(this);e.forEach(function(e){return t.attempt(e)}),this.notify(realMultistompListenners,e)}},{key:"notify",value:function(e,t){var n=!0,a=!1,s=void 0;try{for(var r,i=e[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var u=r.value;u.onChange(t)}}catch(o){a=!0,s=o}finally{try{!n&&i["return"]&&i["return"]()}finally{if(a)throw s}}}},{key:"sendMessage",value:function(e){this.connection.send(e)}},{key:"send",value:function(e){this.connection.send(e),this.realChange=!0}}]),e}(),MidiConnection=function(){function e(t,n){_classCallCheck(this,e),this.listenner=Optional.empty(),this.multistomp=t,this.sender=new MidiSender(n),this.reader={start:function(){},stop:function(){},setListenner:function(){}},this.reader.setListenner(this),this.encoder=MessageEncoderFactory.For(n),this.decoder=MessageDecoderFactory.For(n)}return _createClass(e,[{key:"start",value:function(){this.sender.start(),this.reader.start()}},{key:"stop",value:function(){this.sender.stop(),this.reader.stop()}},{key:"send",value:function(e){var t=!0,n=!1,a=void 0;try{for(var s,r=this.generateMidiMessages(e)[Symbol.iterator]();!(t=(s=r.next()).done);t=!0){var i=s.value;this.sendMidiMessage(i)}}catch(u){n=!0,a=u}finally{try{!t&&r["return"]&&r["return"]()}finally{if(n)throw a}}}},{key:"generateMidiMessages",value:function(e){return this.encoder.encode(e)}},{key:"sendMidiMessage",value:function(e){console.log("MIDI sended: "),console.log(" "+BinarioUtil.byteArrayToHex(e)),this.sender.send(e)}},{key:"setListenner",value:function(e){this.listenner=Optional.of(e)}},{key:"onDataReceived",value:function(e){return console.log("MIDI received: "),console.log(" "+BinarioUtil.byteArrayToHex(e)),this.decoder.isForThis(e)?(messagesDecoded=this.decoder.decode(e,this.multistomp),void(this.listenner.isPresent()&&this.listenner.get().update(messagesDecoded))):void console.log(" unknown ")}}]),e}();MidiConnection.OnUpdateListenner=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"update",value:function(e){}}]),e}();var MessageDecoderFactory=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"For",value:function(e){return null}}]),e}(),MessageEncoderFactory=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"For",value:function(e){if(PedalType.G3==e)return new ZoomGSeriesMessageEncoder;throw new Error("MessageEncoder not found for: "+e)}}]),e}(),MidiTransmition=function(){function e(t){_classCallCheck(this,e);var n=e.findDevices(t),a=this.locateDeviceIn(n);if(!a.isPresent())throw new DeviceNotFoundException("Midi "+deviceType()+" device not found for: "+t+" ("+t.getUSBName()+")");this.device=a.get()}return _createClass(e,[{key:"locateDeviceIn",value:function(e){var t=!0,n=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(t=(s=r.next()).done);t=!0){var i=s.value;if(this.isThis(i))return Optional.of(i)}}catch(u){n=!0,a=u}finally{try{!t&&r["return"]&&r["return"]()}finally{if(n)throw a}}return Optional.empty()}},{key:"isThis",value:function(e){}},{key:"deviceType",value:function(){}},{key:"start",value:function(){this.device.open()}},{key:"stop",value:function(){this.device.close()}}],[{key:"findDevices",value:function(e){var t=new Array,n=void 0,a=!0,s=!1,r=void 0;try{for(var i,u=midiSystem.midiDevices[Symbol.iterator]();!(a=(i=u.next()).done);a=!0)n=i.value,n.name.includes(e.USBName)&&t.push(n)}catch(o){s=!0,r=o}finally{try{!a&&u["return"]&&u["return"]()}finally{if(s)throw r}}return t}}]),e}(),MidiSystem=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"onStart",value:function(e){this.midiInputs=e.inputs,this.midiOutputs=e.outputs}},{key:"onError",value:function(e){console.log(e),console.log("Deu pau :/")}},{key:"midiDevices",get:function(){var e=[],t=!0,n=!1,a=void 0;try{for(var s,r=this.midiInputs.values()[Symbol.iterator]();!(t=(s=r.next()).done);t=!0){var i=s.value;e.push(i)}}catch(u){n=!0,a=u}finally{try{!t&&r["return"]&&r["return"]()}finally{if(n)throw a}}var o=!0,l=!1,c=void 0;try{for(var h,f=this.midiOutputs.values()[Symbol.iterator]();!(o=(h=f.next()).done);o=!0){var y=h.value;e.push(y)}}catch(u){l=!0,c=u}finally{try{!o&&f["return"]&&f["return"]()}finally{if(l)throw c}}return e}}]),e}(),midiSystem=new MidiSystem;window.addEventListener("load",function(){navigator.requestMIDIAccess({sysex:!0}).then(midiSystem.onStart.bind(midiSystem),midiSystem.onError.bind(midiSystem))});var MidiSender=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"isThis",value:function(e){return e.type==this.deviceType()}},{key:"deviceType",value:function(){return"output"}},{key:"send",value:function(e){this.device.send(e)}}]),t}(MidiTransmition),PedalType=function(){function e(t,n,a){_classCallCheck(this,e),this.name=t,this.company=n,this.USBName=a}return _createClass(e,[{key:"getId",value:function(){return this.id}},{key:"getCompany",value:function(){return this.company}},{key:"toString",value:function(){return this.name+" - "+this.company.toString()}},{key:"getUSBName",value:function(){return USBName}}]),e}();PedalType.Null=new PedalType("Unknown Pedal",PedalCompany.NULL,"Pedal Unknown is unimplemented"),PedalType.G2Nu=new PedalType("Zoom G2Nu",PedalCompany.ZoomCorp,"G2Nu/G2.1Nu"),PedalType.G3=new PedalType("Zoom G3v2.0",PedalCompany.ZoomCorp,"ZOOM G Series");var CommonCause=function e(){_classCallCheck(this,e)};CommonCause.TO_PATCH="TO_PATCH",CommonCause.GENERAL_VOLUME="GENERAL_VOLUME",CommonCause.PATCH_VOLUME="PATCH_VOLUME",CommonCause.ACTIVE_EFFECT="ACTIVE_EFFECT",CommonCause.DISABLE_EFFECT="DISABLE_EFFECT",CommonCause.SET_PARAM="SET_PARAM";var Messages=function(){function e(){_classCallCheck(this,e),this.messages=new Array}return _createClass(e,null,[{key:"Empty",value:function(){return new e}},{key:"For",value:function(){var t=new e,n=!0,a=!1,s=void 0;try{for(var r=arguments.length,i=Array(r),u=0;r>u;u++)i[u]=arguments[u];for(var o,l=i[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=o.value;t.addMessage(c)}}catch(h){a=!0,s=h}finally{try{!n&&l["return"]&&l["return"]()}finally{if(a)throw s}}return t}}]),_createClass(e,[{key:"addCause",value:function(e){this.addCause(e,new Details)}},{key:"addCauseDetails",value:function(e,t){this.addMessage(new Message(e,t))}},{key:"addMessage",value:function(e){this.messages.push(e)}},{key:"concatWith",value:function(e){var t=this;e.forEach(function(e){return t.addMessage(e)})}},{key:Symbol.iterator,value:function(){return this.messages[Symbol.iterator]()}},{key:"forEach",value:function(e){this.messages.forEach(e)}},{key:"get",value:function(t){var n=new e,a=!0,s=!1,r=void 0;try{for(var i,u=this[Symbol.iterator]();!(a=(i=u.next()).done);a=!0){var o=i.value;o.is(t)&&n.addMessage(o)}}catch(l){s=!0,r=l}finally{try{!a&&u["return"]&&u["return"]()}finally{if(s)throw r}}return n}},{key:"toString",value:function(){var e="",t=!0,n=!1,a=void 0;try{for(var s,r=this.messages[Symbol.iterator]();!(t=(s=r.next()).done);t=!0){var i=s.value;e+=i.toString()}}catch(u){n=!0,a=u}finally{try{!t&&r["return"]&&r["return"]()}finally{if(n)throw a}}return e}}]),e}();Messages.Details=function(){function e(){_classCallCheck(this,e),this.patch=e.NULL,this.effect=e.NULL,this.param=e.NULL,this.value=e.NULL}return _createClass(e,[{key:"toString",value:function(){var t="";return this.patch!=e.NULL&&(t+=" patch="+this.patch),this.effect!=e.NULL&&(t+=" effect="+this.effect),this.param!=e.NULL&&(t+=" param="+this.param),this.value!=e.NULL&&(t+=" value="+this.value),t}}],[{key:"NULL",value:-1,enumerable:!0}]),e}(),Messages.Message=function(){function e(t,n){_classCallCheck(this,e),void 0===n?this._MessageCause(t):this._MessageCauseDetails(t,n)}return _createClass(e,[{key:"_MessageCause",value:function(e){this._MessageCauseDetails(e,new Details)}},{key:"_MessageCauseDetails",value:function(e,t){this.cause=e,this.details=t}},{key:"details",value:function(){return this.details}},{key:"is",value:function(e){return this.cause==e}},{key:"toString",value:function(){var e=this.cause+": ("+this.details+")";return e}}]),e}();var Effect=function(){function e(t,n){_classCallCheck(this,e),this.state=!1,this.params=new Array,this.listenner=Optional.empty(),this.midiId=t,this.name=n}return _createClass(e,[{key:"getMidiId",value:function(){return this.midiId}},{key:"getName",value:function(){return this.name}},{key:"active",value:function(){this.setState(!0)}},{key:"disable",value:function(){this.setState(!1)}},{key:"toggle",value:function(){this.hasActived()?this.disable():this.active()}},{key:"setState",value:function(e){this.state=e;var t=new Details(Details.TypeChange.PEDAL_STATUS,e?1:0),n=new ChangeMessage(MultistompCause.EFFECT,this,t);this.notify(n)}},{key:"hasActived",value:function(){return this.state}},{key:"addParam",value:function(e){this.params.push(e),e.setListenner(this)}},{key:"toString",value:function(){var t=this.name+": "+this.midiId+" "+e.name+" - ";t+=this.state?"Actived":"Disabled";var n=!0,a=!1,s=void 0;try{for(var r,i=this.params[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var u=r.value;t+=u.toString()}}catch(o){a=!0,s=o}finally{try{!n&&i["return"]&&i["return"]()}finally{if(a)throw s}}return t+=")"}},{key:"setListenner",value:function(e){this.listenner=Optional.of(e)}},{key:"onChange",value:function(e){var t=new ChangeMessage(MultistompCause.SUPER,this,e);this.notify(t)}},{key:"notify",value:function(e){this.listenner.isPresent()&&this.listenner.get().onChange(e)}}]),e}(),Multistomp=function(){function e(){_classCallCheck(this,e),this.listenners=new Array,this.patchs=new Array,this.idCurrentPatch=0}return _createClass(e,[{key:"getPedalType",value:function(){}},{key:"addPatch",value:function(e){this.patchs.push(e),e.setListenner(this)}},{key:"currentPatch",value:function(){try{return this.patchs[this.idCurrentPatch]}catch(e){throw new ImplemetationError("This multistomp havent any Patch. \nAdd the Patchs in the Pedal Construtor: "+this.name)}}},{key:"getIdCurrentPatch",value:function(){return this.idCurrentPatch}},{key:"nextPatch",value:function(){this.toPatch(this.idCurrentPatch+1)}},{key:"beforePatch",value:function(){this.toPatch(this.idCurrentPatch-1)}},{key:"toPatch",value:function(e){e>=this.patchs.length?e=0:0>e&&(e=this.patchs.length-1),this.idCurrentPatch=e;var t=new Details(Details.TypeChange.PATCH_NUMBER,this.idCurrentPatch),n=new ChangeMessage(MultistompCause.MULTISTOMP,this,t);this.notify(n)}},{key:"patchs",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return patchs})},{key:"toString",value:function(){var t="";t+="Multistomp: "+e.name+"\n",t+=" - Current Patch: "+this.currentPatch().toString()+"\n",t+=" - Effects: \n";var n=!0,a=!1,s=void 0;try{for(var r,i=this.currentPatch().effects[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var u=r.value;t+="  |- "+u.toString()+"\n"}}catch(o){a=!0,s=o}finally{try{!n&&i["return"]&&i["return"]()}finally{if(a)throw s}}return t}},{key:"addListenner",value:function(e){this.listenners.push(e)}},{key:"listenners",value:function(){return this.listenners}},{key:"onChange",value:function(e){var t=new ChangeMessage(MultistompCause.SUPER,this,e);this.notify(t)}},{key:"notify",value:function(e){var t=MultistompMessagesConverter.convert(e);this.listenners.forEach(function(e){return e.onChange(t)})}},{key:"start",value:function(){}}]),e}(),MultistompMessagesConverter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"convert",value:function(e){var t=null,n=new Messages.Details;return e.is(MultistompCause.MULTISTOMP)?t=this.convertToPatch(e,n):e.is(MultistompCause.EFFECT)?t=this.convertStatusEffect(e,n):e.is(MultistompCause.PATCH)&&(t=this.convertSetParam(e,n)),null!=t?Messages.For(t):Messages.For()}},{key:"convertToPatch",value:function(e,t){return t.patch=e.causer.getIdCurrentPatch(),new Messages.Message(CommonCause.TO_PATCH,t)}},{key:"convertStatusEffect",value:function(e,t){var n=e.nextMessage.causer;t.patch=e.causer.patchs.indexOf(n);var a=e.realMessage().causer,s=n.effects.indexOf(a);t.effect=s;var r=a.hasActived()?CommonCause.ACTIVE_EFFECT:CommonCause.DISABLE_EFFECT;return new Messages.Message(r,t)}},{key:"convertSetParam",value:function(e,t){var n=e.nextMessage.causer,a=e.nextMessage.nextMessage.causer,s=n.effects.indexOf(a);return t.effect=s,t.param=a.params.indexOf(e.realMessage().causer),t.value=e.realMessage().causer.getValue(),new Messages.Message(CommonCause.SET_PARAM,t)}}]),e}(),Param=function(){function e(t,n,a,s,r){_classCallCheck(this,e),this.stepByStep=1,this.listenner=Optional.empty(),this.name=t,this.minValue=n,this.maxValue=a,this.setCurrentValue(s),this.stepByStep=r}return _createClass(e,[{key:"setCurrentValue",value:function(e){this.isValidValue(e)||(e=e>this.maxValue?this.maxValue:this.minValue),this.currentValue=e;var t=new Details(Details.TypeChange.PARAM,this.currentValue),n=new ChangeMessage(MultistompCause.PATCH,this,t);this.notify(n)}},{key:"isValidValue",value:function(e){return!(e<this.minValue||e>this.maxValue)}},{key:"notify",value:function(e){this.listenner.isPresent()&&this.listenner.get().onChange(e)}},{key:"getName",value:function(){return this.name}},{key:"getValue",value:function(){return this.currentValue}},{key:"setValue",value:function(e){this.setCurrentValue(e)}},{key:"addValue",value:function(){var e=this.currentValue+this.stepByStep;this.isValidValue(e)&&this.setValue(e)}},{key:"getMinValue",value:function(){return this.minValue}},{key:"getMaxValue",value:function(){return this.maxValue}},{key:"setListenner",value:function(e){this.listenner=Optional.of(e)}},{key:"toString",value:function(){return this.name+" = "+this.currentValue+" ["+this.minValue+" - "+this.maxValue+"]"}}]),e}(),Patch=function(){function e(t){_classCallCheck(this,e),this.name="",this.effects=new Array,this.listenner=Optional.empty(),this.id=t}return _createClass(e,[{key:"getId",value:function(){return id}},{key:"addEffect",value:function(e){this.effects.push(e),e.setListenner(this)}},{key:"setListenner",value:function(e){this.listenner=Optional.of(e)}},{key:"onChange",value:function(e){var t=new ChangeMessage(MultistompCause.SUPER,this,e);this.notify(t)}},{key:"notify",value:function(e){this.listenner.isPresent()&&this.listenner.get().onChange(e)}},{key:"toString",value:function(){return"Patch "+this.id+" - "+this.name+" ("+this.effects.length+") Effect(s))"}}]),e}(),ChangeMessage=function(){function e(t,n,a){_classCallCheck(this,e),this.nextMessage=null,a instanceof e?this._constructorMessage(t,n,a):this._constructorDetails(t,n,a)}return _createClass(e,null,[{key:"None",value:function(t){return new e<Multistomp>(MultistompCause.NONE,Details.NONE())}},{key:"For",value:function(t,n){return new e<Multistomp>(MultistompCause.MULTISTOMP,n)}},{key:"For",value:function(t,n,a){var s=new e<Patch>(MultistompCause.PATCH,a),r=new e<Multistomp>(MultistompCause.SUPER,s);return r}},{key:"For",value:function(t,n,a,s){var r=new e<Effect>(MultistompCause.EFFECT,s),i=new e<Patch>(MultistompCause.SUPER,r),u=new e<Multistomp>(MultistompCause.SUPER,i);return u}},{key:"For",value:function(t,n,a,s,r){var i=new e<Param>(MultistompCause.PARAM,r),u=new e<Effect>(MultistompCause.SUPER,i),o=new e<Patch>(MultistompCause.SUPER,u),l=new e<Multistomp>(MultistompCause.SUPER,o);return l}}]),_createClass(e,[{key:"_constructorMessage",value:function(e,t,n){this._constructorDetails(e,t,Details.NONE()),this.nextMessage=n}},{key:"_constructorDetails",value:function(e,t,n){this.cause=e,this.causer=t,this.details=n}},{key:"details",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return details})},{key:"is",value:function(e){return e===this.realMessage().cause}},{key:"realMessage",value:function(){for(var e=this;e.cause==MultistompCause.SUPER;)e=e.nextMessage;return e}},{key:"toString",value:function(){var e="";return e+=this.causer.getClass().getSimpleName(),e+=this.cause==MultistompCause.SUPER?" -> "+this.nextMessage.toString():" ("+this.cause.toString()+")"}}]),e}(),Details=function(){function e(t,n){_classCallCheck(this,e),this.type=t,this.newValue=n}return _createClass(e,null,[{key:"NONE",value:function(){return new e(e.TypeChange.NONE,0)}}]),_createClass(e,[{key:"newValue",value:function(){return this.newValue}},{key:"type",value:function(){return this.type}},{key:"toString",value:function(){return"({this.type} {this.newValue})"}}]),e}();Details.TypeChange={NONE:"NONE",PEDAL_STATUS:"PEDAL_STATUS",PARAM:"PARAM",PATCH_NUMBER:"PATCH_NUMBER"};var MultistompCause=function t(){_classCallCheck(this,t)};MultistompCause.SUPER="SUPER",MultistompCause.NONE="NONE",MultistompCause.MULTISTOMP="MULTISTOMP",MultistompCause.PATCH="PATCH",MultistompCause.EFFECT="EFFECT",MultistompCause.PARAM="PARAM";var Log=function(){function e(t){_classCallCheck(this,e),this.type=t}return _createClass(e,[{key:"onChange",value:function(e){var t=!0,n=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(t=(s=r.next()).done);t=!0){var i=s.value;console.info("LOG:: "+this.type),console.log("LOG:: "+i.toString())}}catch(u){n=!0,a=u}finally{try{!t&&r["return"]&&r["return"]()}finally{if(n)throw a}}}}]),e}(),MultistompSimulator=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);for(var n=0;e>n;n++){var a=new Patch(n),s=!0,r=!1,i=void 0;try{for(var u,o=this.genEffects()[Symbol.iterator]();!(s=(u=o.next()).done);s=!0){var l=u.value;a.addEffect(l)}}catch(c){r=!0,i=c}finally{try{!s&&o["return"]&&o["return"]()}finally{if(r)throw i}}this.addPatch(a)}}return _inherits(t,e),_createClass(t,[{key:"genEffects",value:function(){var e=new Array;return e.push(this.genEffect(0,"Overdrive")),e.push(this.genEffect(1,"Reverb")),e.push(this.genEffect(2,"Chorus")),e}},{key:"genEffect",value:function(e,t){var n=new Effect(e,t);return n.addParam(new Param("Gain",0,50,0,1)),n.addParam(new Param("Volume",0,25,0,1)),n}},{key:"start",value:function(){return Messages.Empty()}},{key:"getPedalType",value:function(){return PedalType.Null}}]),t}(Multistomp),ZoomGSeries=function(e){function t(e,n,a){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.TOTAL_PATCHS=e,this.TOTAL_EFFECTS=n,this.SIZE_PARAMS=a;var s=this.createPatchs(this.TOTAL_PATCHS),r=!0,i=!1,u=void 0;try{for(var o,l=s[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var c=o.value;this.addPatch(c)}}catch(h){i=!0,u=h}finally{try{!r&&l["return"]&&l["return"]()}finally{if(i)throw u}}}return _inherits(t,e),_createClass(t,[{key:"createPatchs",value:function(e){for(var t=new Array,n=0;e>n;n++){var a=new Patch(n),s=!0,r=!1,i=void 0;try{for(var u,o=this.createEffects(this.TOTAL_EFFECTS)[Symbol.iterator]();!(s=(u=o.next()).done);s=!0){var l=u.value;a.addEffect(l)}}catch(c){r=!0,i=c}finally{try{!s&&o["return"]&&o["return"]()}finally{if(r)throw i}}t.push(a)}return t}},{key:"createEffects",value:function(e){for(var t=new Array,n=0;e>n;n++)t.push(ZoomGSeriesEffect.COMP.generate());return t}},{key:"start",value:function(){var e=Messages.Empty();return e.concatWith(ZoomGSeriesMessages.LISSEN_ME()),e.concatWith(ZoomGSeriesMessages.YOU_CAN_TALK()),e}},{key:"getPedalType",value:function(){return PedalType.G3}}]),t}(Multistomp),ZoomGSeriesCause=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),t}(CommonCause);ZoomGSeriesCause.REQUEST_CURRENT_PATCH_NUMBER="REQUEST_CURRENT_PATCH_NUMBER",ZoomGSeriesCause.REQUEST_CURRENT_PATCH_DETAILS="REQUEST_CURRENT_PATCH_DETAILS",ZoomGSeriesCause.REQUEST_SPECIFIC_PATCH_DETAILS="REQUEST_SPECIFIC_PATCH_DETAILS",ZoomGSeriesCause.LISSEN_ME="LISSEN_ME",ZoomGSeriesCause.YOU_CAN_TALK="YOU_CAN_TALK",ZoomGSeriesCause.SET_EFFECT="SET_EFFECT";var ZoomGSeriesEffect=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"COMP",value:new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"generate",value:function(){var e=new Effect(0,this.constructor.name);return e.addParam(new Param("Sense",0,10,6,1)),e.addParam(new Param("Tone",0,10,6,1)),e.addParam(new Param("Level",0,150,100,1)),e.addParam(new Param("ATTCK",0,1,0,1)),e}}]),e}()),enumerable:!0}]),e}(),ZoomGSeriesMessageEncoder=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"encode",value:function(e){var t=this,n=new Array;return e.get(CommonCause.TO_PATCH).forEach(function(e){return n.push(t.toPatch(e))}),e.get(CommonCause.ACTIVE_EFFECT).forEach(function(e){var a=t.statusEffect(e,CommonCause.ACTIVE_EFFECT);a.forEach(function(e){return n.push(e)})}),e.get(CommonCause.DISABLE_EFFECT).forEach(function(e){var a=t.statusEffect(e,CommonCause.DISABLE_EFFECT);a.forEach(function(e){return n.push(e)})}),e.get(CommonCause.SET_PARAM).forEach(function(e){return n.push(t.setParam(e))}),e.get(ZoomGSeriesCause.SET_EFFECT).forEach(function(e){return n.push(t.setEffect(e))}),e.get(ZoomGSeriesCause.REQUEST_CURRENT_PATCH_NUMBER).forEach(function(e){return n.push(t.requestCurrentPatchNumber(e))}),e.get(ZoomGSeriesCause.REQUEST_CURRENT_PATCH_DETAILS).forEach(function(e){return n.push(t.requestCurrentPatchDetails(e))}),e.get(ZoomGSeriesCause.REQUEST_SPECIFIC_PATCH_DETAILS).forEach(function(e){return n.push(t.requestSpecificPatchDetails(e))}),e.get(ZoomGSeriesCause.LISSEN_ME).forEach(function(e){return n.push(t.lissenMe())}),e.get(ZoomGSeriesCause.YOU_CAN_TALK).forEach(function(e){return n.push(t.youCanTalk())}),n}},{key:"toPatch",value:function(e){var t=192,n=e.details.patch;try{return[t,n]}catch(a){throw new Error(a)}}},{key:"statusEffect",value:function(t,n){var a=t.details.effect,s=n==CommonCause.ACTIVE_EFFECT,r=s?1:0;return this.group(this.lissenMe(),this.manupuleEffect(a,e.SET_STATUS,r))}},{key:"setParam",value:function(t){var n=t.details.effect,a=t.details.param,s=t.details.value;return this.manupuleEffect(n,a+e.PARAM_EFFECT,s)}},{key:"setEffect",value:function(t){var n=t.details.effect,a=t.details.value;return this.manupuleEffect(n,e.CHANGE_EFFECT,a)}},{key:"manupuleEffect",value:function(e,t,n){var a=n/128|0;return n%=128,this.customMessageFor([240,82,0,90,49,e,t,n,a,247])}},{key:"requestCurrentPatchNumber",value:function(e){return this.customMessageFor([240,82,0,90,51,247])}},{key:"requestCurrentPatchDetails",value:function(e){return this.customMessageFor([240,82,0,90,41,247])}},{key:"requestSpecificPatchDetails",value:function(e){var t=e.details().patch,n=[240,82,0,90,9,0,0,t,247];return this.customMessageFor(n)}},{key:"lissenMe",value:function(){return this.customMessageFor([240,82,0,90,80,247])}},{key:"youCanTalk",value:function(){return this.customMessageFor([240,82,0,90,22,247])}},{key:"group",value:function(){var e=new Array,t=!0,n=!1,a=void 0;try{for(var s=arguments.length,r=Array(s),i=0;s>i;i++)r[i]=arguments[i];for(var u,o=r[Symbol.iterator]();!(t=(u=o.next()).done);t=!0){var l=u.value;e.push(l)}}catch(c){n=!0,a=c}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw a}}return e}},{key:"customMessageFor",value:function(e){try{return e}catch(t){throw new Error(t)}}}],[{key:"SET_STATUS",value:0,enumerable:!0},{key:"CHANGE_EFFECT",value:1,enumerable:!0},{key:"PARAM_EFFECT",value:2,enumerable:!0}]),e}(),ZoomGSeriesMessages=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"REQUEST_CURRENT_PATCH_NUMBER",value:function(){return Messages.For(new Messages.Message(ZoomGSeriesCause.REQUEST_CURRENT_PATCH_NUMBER))}},{key:"REQUEST_CURRENT_PATCH_DETAILS",value:function(){return Messages.For(new Messages.Message(ZoomGSeriesCause.REQUEST_CURRENT_PATCH_DETAILS))}},{key:"REQUEST_SPECIFIC_PATCH_DETAILS",value:function(e){var t=new Messages.Detals;return t.patch=e,Messages.For(new Messages.Message(ZoomGSeriesCause.REQUEST_SPECIFIC_PATCH_DETAILS,t))}},{key:"LISSEN_ME",value:function(){return Messages.For(new Messages.Message(ZoomGSeriesCause.LISSEN_ME))}},{key:"YOU_CAN_TALK",value:function(){return Messages.For(new Messages.Message(ZoomGSeriesCause.YOU_CAN_TALK))}},{key:"SET_EFFECT",value:function(e,t){var n=new Messages.Detals;return n.effect=e,n.value=t,Messages.For(new Messages.Message(ZoomGSeriesCause.SET_EFFECT,n))}}]),e}();