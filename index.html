<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
        <link rel="stylesheet" href="dist/css.css" charset="utf-8">

        <script src="bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
        <link rel="import" href="bower_components/polymer/polymer.html">

        <link rel="import" href="dist/web-components/guitar-pedal/guitar-pedal.html">

        <script src="dist/cache/babel.js" charset="utf-8"></script>
    </head>
    <body>
        <header id="patchDetails">
            <span id="patchName">Patch Name</span>
            <span id="patchNumber">00</span>
        </header>
        <div id="pedalboard">
            <ul>
                <li><guitar-pedal name="Compressor"></guitar-pedal></li>
                <li><guitar-pedal name="Compressor" color="yellow"></guitar-pedal></li>
                <li><guitar-pedal name="Compressor" color="blue"></guitar-pedal></li>
                <li><guitar-pedal name="Compressor"></guitar-pedal></li>
                <li><guitar-pedal name="Compressor"></guitar-pedal></li>
                <li><guitar-pedal name="Compressor"></guitar-pedal></li>
            </ul>
        </div>

        <script type="text/javascript">
            var controller;
            window.addEventListener("load", function() {
                "use strict";
                setTimeout(
                    function() {
                        controller = PedalControllerFactory.searchPedal();
                        controller.on();

                        var pedals = document.querySelectorAll("guitar-pedal");

                        for (let i=0; i<pedals.length; i++) {
                            pedals[i].click = function(argument) {
                                controller.toogleEffect(i);
                            }.bind(this);
                        }
                    },
                    1000
                );
            });
        </script>
    </body>
</html>
